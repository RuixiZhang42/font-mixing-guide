%
% This is file `punct-and-digits.tex'.
%
% The standard usage is:
%
%   \usepackage{mtpro2}
%   \input{mtpro2-patch}
%   \input{punct-and-digits}
%
%   The punctuation symbols , ; . \ldotp : \colon ! ? will
% now come from family 0.
%
%   The digits, in \displaystyle and \textstyle, will also
% come from family 0. However, they will no longer respond
% to font changing commands such as \mathbb. To get around
% this, use, e.g., $\mathbb{\mtpdigit1}$.
%
%   The kerning between math letters and comma/period will
% be lost. If things looked wrong, say in $f,g$, you could
% try $f\fpmk,g$. The `pmk' stands for `post mkern'.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\expandafter\edef\csname current@catcode\endcsname{\the\catcode`\@}
\catcode`\@=11 %
\DeclareMathSymbol{,}{\mathpunct}{operators}{`,}
\DeclareMathSymbol{;}{\mathpunct}{operators}{`;}
\DeclareMathSymbol{.}{\mathord}{operators}{`.}
\DeclareMathSymbol{\ldotp}{\mathpunct}{operators}{`.}
\DeclareMathSymbol{:}{\mathrel}{operators}{`:}
\DeclareMathSymbol{\colon}{\mathpunct}{operators}{`:}
\DeclareMathSymbol{!}{\mathclose}{operators}{`!}
\DeclareMathSymbol{?}{\mathclose}{operators}{`?}
\begingroup
\newcommand*\adjust@digit[1]{%
  \begingroup\lccode`\~`#1 \lowercase{\endgroup
    \expandafter\xdef\csname digit \romannumeral#1code\endcsname
      {\the\mathcode`#1\relax}%
    \gdef~{\csname digit \romannumeral#1\endcsname}%
  }%
  \expandafter\gdef\csname digit \romannumeral#1\endcsname{{%
    \mathchoice
      {\operator@font
       \mathchar\csname digit \romannumeral#1code\endcsname}%
      {\operator@font
       \mathchar\csname digit \romannumeral#1code\endcsname}%
      {\mathchar\csname digit \romannumeral#1code\endcsname}%
      {\mathchar\csname digit \romannumeral#1code\endcsname}%
  }}%
  \AtBeginDocument{\mathcode`#1="8000 }%
}
\adjust@digit{0}
\adjust@digit{1}
\adjust@digit{2}
\adjust@digit{3}
\adjust@digit{4}
\adjust@digit{5}
\adjust@digit{6}
\adjust@digit{7}
\adjust@digit{8}
\adjust@digit{9}
\newcommand*\generate@post@mkern[2]{%
  \expandafter\ifx\csname#1pmk\endcsname\relax
    \expandafter\gdef\csname#1pmk\endcsname{\mkern#2mu}%
  \fi
}
\generate@post@mkern{A}          {0.180}
\generate@post@mkern{B}         {-0.927}
\generate@post@mkern{C}         {-1.620}
\generate@post@mkern{D}         {-0.900}
\generate@post@mkern{E}         {-0.360}
\generate@post@mkern{F}         {-1.845}
\generate@post@mkern{G}         {-0.927}
\generate@post@mkern{H}         {-1.710}
\generate@post@mkern{I}         {-1.260}
\generate@post@mkern{J}         {-1.530}
\generate@post@mkern{K}         {-0.846}
\generate@post@mkern{L}          {0.360}
\generate@post@mkern{M}         {-1.980}
\generate@post@mkern{N}         {-2.340}
\generate@post@mkern{O}         {-0.720}
\generate@post@mkern{P}         {-1.980}
\generate@post@mkern{Q}         {-0.180}
\generate@post@mkern{R}          {0.450}
\generate@post@mkern{S}         {-0.900}
\generate@post@mkern{T}         {-2.880}
\generate@post@mkern{U}         {-2.700}
\generate@post@mkern{V}         {-3.240}
\generate@post@mkern{W}         {-3.240}
\generate@post@mkern{X}         {-1.440}
\generate@post@mkern{Y}         {-3.060}
\generate@post@mkern{Z}         {-0.360}
\generate@post@mkern{a}          {0.180}
\generate@post@mkern{b}         {-0.360}
\generate@post@mkern{d}         {-0.720}
\generate@post@mkern{f}         {-4.500}
\generate@post@mkern{g}         {-0.360}
\generate@post@mkern{i}         {-0.990}
\generate@post@mkern{j}         {-2.700}
\generate@post@mkern{k}         {-0.360}
\generate@post@mkern{l}         {-0.540}
\generate@post@mkern{m}          {0.360}
\generate@post@mkern{n}          {0.360}
\generate@post@mkern{p}         {-0.360}
\generate@post@mkern{q}         {-0.360}
\generate@post@mkern{r}         {-1.980}
\generate@post@mkern{s}         {-0.360}
\generate@post@mkern{t}         {-0.540}
\generate@post@mkern{v}         {-0.180}
\generate@post@mkern{y}         {-0.360}
\generate@post@mkern{dbar}      {-0.720}
\generate@post@mkern{ell}        {0.540}
\generate@post@mkern{Gamma}     {-3.600}
\generate@post@mkern{Delta}      {0.540}
\generate@post@mkern{Theta}     {-0.900}
\generate@post@mkern{Lambda}     {0.990}
\generate@post@mkern{Xi}        {-0.900}
\generate@post@mkern{Pi}        {-1.260}
\generate@post@mkern{Sigma}     {-0.900}
\generate@post@mkern{Upsilon}   {-3.240}
\generate@post@mkern{Phi}       {-1.080}
\generate@post@mkern{Psi}       {-2.520}
\generate@post@mkern{alpha}     {-0.360}
\generate@post@mkern{beta}      {-0.486}
\generate@post@mkern{varbeta}   {-0.486}
\generate@post@mkern{gamma}     {-2.160}
\generate@post@mkern{varepsilon}{-0.360}
\generate@post@mkern{zeta}      {-0.990}
\generate@post@mkern{theta}     {-0.720}
\generate@post@mkern{vartheta}  {-1.980}
\generate@post@mkern{iota}       {0.360}
\generate@post@mkern{kappa}     {-0.360}
\generate@post@mkern{lambda}     {0.900}
\generate@post@mkern{mu}         {0.234}
\generate@post@mkern{nu}        {-0.486}
\generate@post@mkern{xi}        {-0.486}
\generate@post@mkern{pi}        {-1.188}
\generate@post@mkern{varpi}     {-1.440}
\generate@post@mkern{varrho}     {0.180}
\generate@post@mkern{sigma}     {-1.980}
\generate@post@mkern{varsigma}  {-1.980}
\generate@post@mkern{tau}       {-0.990}
\generate@post@mkern{upsilon}   {-0.486}
\generate@post@mkern{psi}       {-1.800}
\generate@post@mkern{omega}      {0.360}
\generate@post@mkern{upGamma}   {-1.710}
\generate@post@mkern{upDelta}    {0.720}
\generate@post@mkern{upTheta}    {0.315}
\generate@post@mkern{upSigma}    {0.720}
\generate@post@mkern{upUpsilon} {-0.990}
\generate@post@mkern{upPhi}     {-0.486}
\generate@post@mkern{upPsi}     {-0.990}
\generate@post@mkern{upOmega}    {0.990}
\generate@post@mkern{upgamma}   {-1.440}
\generate@post@mkern{upvartheta}{-1.080}
\generate@post@mkern{upvarpi}   {-1.440}
\generate@post@mkern{upsigma}   {-1.440}
\generate@post@mkern{upchi}     {-0.720}
\generate@post@mkern{uppsi}     {-1.080}
\endgroup
\newcommand*\mtpdigit[1]{%
  \mathchar\csname digit \romannumeral#1code\endcsname
}
\AtBeginDocument{%
  \edef\@tempa{\csname opt@mtpro2.sty\endcsname}%
  \def\@tempb{{slantedGreek}}%
  \expandafter\expandafter\expandafter
    \in@\expandafter\@tempb\expandafter{\@tempa}%
  \ifin@\else
    \let\Gammapmk\upGammapmk
    \let\Deltapmk\upDeltapmk
    \let\Thetapmk\upThetapmk
    \let\Lambdapmk\relax
    \let\Xipmk\relax
    \let\Pipmk\relax
    \let\Sigmapmk\upSigmapmk
    \let\Upsilonpmk\upUpsilonpmk
    \let\Phipmk\upPhipmk
    \let\Psipmk\upPsipmk
    \let\Omegapmk\upOmegapmk
  \fi
}
\catcode`\@=\current@catcode\relax
\endinput